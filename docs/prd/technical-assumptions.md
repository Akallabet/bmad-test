# Technical Assumptions

## Repository Structure: Monorepo

Use a monorepo structure with npm workspaces (or pnpm workspaces).

**Structure:**
```
/packages/web - React frontend (React Router v7)
/packages/api - Fastify backend
/packages/shared - Shared TypeScript types (if needed)
Root-level configuration (ESLint, TypeScript, package.json)
```

**Rationale:** Single repository simplifies development workflow during 2-hour sprint. Shared types between frontend and backend ensure type safety across API boundaries. Easy deployment: both packages can be built and deployed from root.

## Service Architecture

**Decision:** Monolith - Single backend service with REST API

- Fastify server exposing RESTful endpoints (`/api/tasks`, `/api/tasks/:id`, etc.)
- Frontend served as static build (Vite production build)
- SQLite in-memory database running within the Fastify process
- No microservices, no separate database server

**Rationale:** Simplest possible architecture for 2-hour constraint. Zero infrastructure provisioning. Single deployment unitâ€”one `flyctl deploy` command.

**Known Limitations:** In-memory database means data doesn't persist across server restarts. All users share the same database instance.

**Future Evolution Path:** Easy to migrate from in-memory SQLite to persistent SQLite file or PostgreSQL by changing Drizzle connection string.

## Testing Requirements

**Decision:** Manual testing only for MVP, no automated test suite

**Scope:**
- Manual end-to-end testing in Chrome (desktop) and one mobile browser
- Functional verification of all five core features
- No unit tests, no integration tests, no E2E automation

**Rationale:** Writing and maintaining tests would consume 20-30% of the 2-hour window. For a portfolio demonstration, working software > test coverage.

**Post-MVP Recommendation:** Add Jest + React Testing Library for frontend, Vitest for backend, and Playwright for E2E as Phase 2 improvements.

## Additional Technical Assumptions and Requests

**Frontend Technology Stack:**
- **Framework:** React 19 with React Router v7 (for routing and data loading patterns)
- **Build Tool:** Vite (fast development server, optimized production builds)
- **Styling:** Vanilla CSS or minimal utility-first CSS
- **State Management:** React built-in `useState`, `useEffect`, React Router loaders/actions
- **HTTP Client:** Native `fetch` API
- **TypeScript:** Strict mode enabled

**Backend Technology Stack:**
- **Runtime:** Node.js 24 (LTS)
- **Framework:** Fastify (chosen for performance and modern async/await patterns)
- **Database:** SQLite in-memory (`:memory:`) with Drizzle ORM
- **Migrations:** Drizzle Kit for schema migrations (run at server startup)
- **Validation:** Fastify schema validation
- **TypeScript:** Strict mode enabled

**Database Schema (Preliminary):**
- Single `tasks` table with columns:
  - `id` (primary key, integer auto-increment or UUID)
  - `text` (string, task content)
  - `createdAt` (timestamp, for date sorting)
  - `archivedAt` (nullable timestamp, null = active, non-null = archived)
  - `sortOrder` (integer, for manual sorting)
- Drizzle schema defined in TypeScript, migrations auto-generated by Drizzle Kit

**Deployment:**
- **Platform:** Fly.io (free tier or minimal paid tier, budget $0-50/month)
- **Domain:** Use Fly.io default `.fly.dev` subdomain
- **HTTPS:** Enforced by default via Fly.io
- **Deployment Method:** `flyctl launch` and `flyctl deploy` via CLI

**Development Tooling:**
- **Version Control:** Git with minimal commit history during 2-hour sprint
- **IDE:** VS Code (or similar) with TypeScript support
- **Linting:** ESLint for both frontend and backend
- **Formatting:** Prettier for code formatting

**Security & Validation:**
- **Input Validation:** Fastify schema validation on all POST/PUT/PATCH endpoints
- **XSS Prevention:** React's default JSX escaping
- **SQL Injection Prevention:** Drizzle ORM parameterized queries
- **Rate Limiting:** Fastify rate-limit plugin

**Performance Targets:**
- Frontend bundle size: < 200KB gzipped
- API response time: < 50ms for CRUD operations
- Perceived UI latency: < 100ms (optimistic updates)

**Not Included (Explicitly Out of Scope):**
- Authentication/Authorization
- Real-time updates (WebSockets/SSE)
- Search functionality
- Tags and filtering
- Export/download features
- PWA features
- Analytics or error tracking services
- Database backups or persistence
